<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Create your MatchMySkills Account</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      background: #0d1117;
      color: #c9d1d9;
      height: 100vh;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      background-color: #0d1117;
      z-index: -1;
      top: 0;
      left: 0;
    }
    .auth-container {
      background-color: #161b22;
      padding: 40px 50px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.7);
      max-width: 400px;
      width: 100%;
      box-sizing: border-box;
      text-align: center;
      position: relative;
    }
    h1 {
      margin-bottom: 30px;
      color: #58a6ff;
      font-weight: 700;
      font-size: 1.8rem;
    }
    label {
      display: block;
      margin-top: 15px;
      text-align: left;
      font-weight: 600;
      font-size: 0.9rem;
      color: #8b949e;
    }
    input, select {
      width: 100%;
      padding: 10px 12px;
      margin-top: 5px;
      background-color: #0d1117;
      border: 1px solid #30363d;
      border-radius: 6px;
      color: #c9d1d9;
      font-size: 1rem;
      box-sizing: border-box;
    }
    input::placeholder {
      color: #8b949e;
    }
    select {
      cursor: pointer;
    }
    button.btn-primary {
      margin-top: 25px;
      width: 100%;
      padding: 12px;
      background-color: #238636;
      border: none;
      border-radius: 6px;
      color: white;
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(35, 134, 54, 0.6);
      transition: background-color 0.3s ease;
    }
    button.btn-primary:hover, button.btn-primary:focus {
      background-color: #2ea043;
      outline: none;
    }
    .auth-switch {
      margin-top: 20px;
      font-size: 0.9rem;
      color: #8b949e;
    }
    .auth-switch a {
      color: #58a6ff;
      text-decoration: none;
    }
    .auth-switch a:hover, .auth-switch a:focus {
      text-decoration: underline;
      outline: none;
    }
    .btn-back {
      display: inline-block;
      margin-top: 30px;
      padding: 8px 16px;
      background-color: transparent;
      border: 1.5px solid #58a6ff;
      border-radius: 6px;
      color: #58a6ff;
      text-decoration: none;
      font-weight: 600;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .btn-back:hover, .btn-back:focus {
      background-color: #58a6ff;
      color: #0d1117;
      outline: none;
    }
    ul.flash-messages {
      list-style: none;
      padding-left: 0;
      margin-bottom: 20px;
    }
    ul.flash-messages li {
      padding: 10px 12px;
      margin-bottom: 10px;
      border-radius: 6px;
      font-weight: 600;
      text-align: center;
    }
    ul.flash-messages li.error {
      background-color: #ff6b6b;
      color: white;
    }
    ul.flash-messages li.success {
      background-color: #2ea043;
      color: white;
    }
    ul.flash-messages li.warning {
      background-color: #f0ad4e;
      color: white;
    }
    .password-wrapper {
      position: relative;
    }
    .show-password-toggle {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      color: #58a6ff;
      user-select: none;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .terms-container {
      margin-top: 20px;
      text-align: left;
      font-size: 0.9rem;
      color: #8b949e;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .terms-container input[type="checkbox"] {
      cursor: pointer;
      width: 18px;
      height: 18px;
    }
    .terms-container label {
      cursor: pointer;
      user-select: none;
    }
    /* Terms popup style */
    .terms-popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      background: #161b22;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.8);
      padding: 20px 30px;
      color: #c9d1d9;
      font-size: 0.9rem;
      line-height: 1.5;
      transform: translate(-50%, -50%);
      z-index: 1000;
    }
    .terms-popup h2 {
      color: #58a6ff;
      margin-top: 0;
    }
    .terms-popup p, .terms-popup li {
      margin-bottom: 12px;
    }
    .terms-popup ol {
      padding-left: 20px;
      margin-bottom: 12px;
    }
    .terms-popup button.close-btn {
      display: block;
      margin: 20px auto 0 auto;
      background-color: #238636;
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      color: white;
      font-weight: 700;
      cursor: pointer;
      font-size: 1rem;
      box-shadow: 0 4px 12px rgba(35, 134, 54, 0.6);
      transition: background-color 0.3s ease;
    }
    .terms-popup button.close-btn:hover, .terms-popup button.close-btn:focus {
      background-color: #2ea043;
      outline: none;
    }
    /* Overlay */
    .overlay {
      display: none;
      position: fixed;
      top:0; left:0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.7);
      z-index: 999;
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>

  <div class="auth-container">
    <h1>Create your MatchMySkills Account</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flash-messages">
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('register') }}">
      <label for="username">Username</label>
      <input id="username" name="username" placeholder="Your username" required />

      <label for="email">Email</label>
      <input id="email" name="email" type="email" placeholder="your.email@example.com" required />

      <label for="password">Password</label>
      <div class="password-wrapper">
        <input id="password" name="password" type="password" placeholder="Create a strong password" required />
        <span id="togglePassword" class="show-password-toggle">Show</span>
      </div>

      <label for="country">Country / Region</label>
      <select id="country" name="country" required>
        <option value="" disabled selected>Select your country</option>
        <option value="India">India</option>
        <option value="USA">USA</option>
        <option value="UK">UK</option>
        <option value="Canada">Canada</option>
      </select>

      <div class="terms-container">
        <input type="checkbox" id="agreeTerms" name="agreeTerms" required />
        <label for="agreeTerms">
          I agree to the
          <a href="#" id="showTerms" style="color:#58a6ff; text-decoration: underline; cursor: pointer;">Terms & Privacy Policy</a>
        </label>
      </div>

      <button type="submit" class="btn-primary">Create Account</button>
    </form>

    <p class="auth-switch">
      Already have an account? <a href="{{ url_for('login') }}">Sign in →</a>
    </p>

    <p>
      <a href="{{ url_for('landing') }}" class="btn-back">← Back to Home</a>
    </p>
  </div>

  <!-- Overlay -->
  <div class="overlay" id="overlay"></div>

  <!-- Terms & Privacy Policy Popup -->
  <div class="terms-popup" id="termsPopup" role="dialog" aria-modal="true" aria-labelledby="termsTitle" tabindex="-1">
    <h2 id="termsTitle">Terms of Service & Privacy Policy</h2>
    <p><strong>Last updated:</strong> July 2025</p>
    <ol>
      <li>
        <strong>Introduction</strong><br>
        Welcome to MatchMySkills! By accessing or using our website and services, you agree to comply with and be bound by these Terms of Service and Privacy Policy. If you do not agree, please do not use our site.
      </li>
      <li>
        <strong>Use of the Website</strong><br>
        You must be at least 18 years old to use MatchMySkills.<br>
        You agree to provide accurate information when registering or submitting your resume.<br>
        You are responsible for keeping your account login credentials confidential.
      </li>
      <li>
        <strong>User Content and Intellectual Property</strong><br>
        You retain ownership of the content you upload (such as resumes).<br>
        By uploading your resume or any content, you grant MatchMySkills a limited license to process it solely to provide our services.<br>
        You agree not to upload content that is unlawful, harmful, or infringes on others' rights.
      </li>
      <li>
        <strong>Privacy and Data Collection</strong><br>
        We collect personal information such as your name, email, resume content, and job role preferences to provide and improve our services.<br>
        Your data is stored securely and will not be shared with third parties without your consent, except where required by law.<br>
        We may use cookies and analytics tools to improve user experience.
      </li>
      <li>
        <strong>Security</strong><br>
        We implement reasonable security measures to protect your data.<br>
        However, no internet transmission is completely secure, so we cannot guarantee absolute security.
      </li>
      <li>
        <strong>Limitation of Liability</strong><br>
        MatchMySkills is provided "as is" without warranties of any kind.<br>
        We do not guarantee job placement or specific results.<br>
        We are not liable for any direct, indirect, or consequential damages arising from your use of the site.
      </li>
      <li>
        <strong>Changes to Terms</strong><br>
        We may update these Terms & Privacy Policy from time to time.<br>
        Continued use of the site after changes constitutes acceptance of the updated terms.
      </li>
      <li>
        <strong>Contact Us</strong><br>
        If you have questions or concerns about these Terms or Privacy Policy, please contact us at:<br>
        <a href="mailto:support@matchmyskills.com" style="color:#58a6ff; text-decoration: underline;">support@matchmyskills.com</a>
      </li>
    </ol>
    <button class="close-btn" id="closeTerms">Close</button>
  </div>

  <script>
    particlesJS("particles-js", {
      "particles": {
        "number": { "value": 60 },
        "size": { "value": 3 },
        "color": { "value": "#58a6ff" },
        "line_linked": {
          "enable": true,
          "distance": 130,
          "color": "#58a6ff",
          "opacity": 0.4,
          "width": 1
        },
        "move": {
          "enable": true,
          "speed": 0.6
        }
      },
      "interactivity": {
        "events": {
          "onhover": { "enable": true, "mode": "repulse" }
        }
      }
    });

    // Toggle show/hide password
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    togglePassword.addEventListener('click', () => {
      const isPassword = passwordInput.type === 'password';
      passwordInput.type = isPassword ? 'text' : 'password';
      togglePassword.textContent = isPassword ? 'Hide' : 'Show';
    });

    // Show/hide Terms popup
    const showTerms = document.getElementById('showTerms');
    const termsPopup = document.getElementById('termsPopup');
    const closeTerms = document.getElementById('closeTerms');
    const overlay = document.getElementById('overlay');

    function openTerms() {
      termsPopup.style.display = 'block';
      overlay.style.display = 'block';
      termsPopup.focus();
      document.body.style.overflow = 'hidden'; // prevent background scroll
    }
    function closeTermsPopup() {
      termsPopup.style.display = 'none';
      overlay.style.display = 'none';
      document.body.style.overflow = ''; // restore scroll
    }

    showTerms.addEventListener('click', function(e) {
      e.preventDefault();
      openTerms();
    });

    closeTerms.addEventListener('click', closeTermsPopup);
    overlay.addEventListener('click', closeTermsPopup);

    // Close popup on Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape" && termsPopup.style.display === 'block') {
        closeTermsPopup();
      }
    });
  </script>
</body>
</html>
